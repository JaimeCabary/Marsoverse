<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ZEPTA Terminal ‚Äì MarsoVerse</title>
  <!-- <link rel="stylesheet" href="styles/zepta.css"/>

  -->
  <style>
    /* Base styles */
body, html {
  margin:0; padding:0; height:100%; width:100%;
  font-family:'JetBrains Mono',monospace;
  background:#000; color:#fff;
  overflow:hidden;
}

.glassmorph {
  background: rgba(255,255,255,0.05);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.2);
}

header#zeptabar {
  height:60px; display:flex;
  align-items:center; justify-content:space-between;
  padding:0 1rem; position:relative;
  z-index:2;
}

/* Theme toggle */
.switch {
  position: relative; display:inline-block;
  width:50px; height:24px;
}
.switch input { display:none; }
.slider {
  position:absolute; inset:0;
  background-color:#555;
  border-radius:34px;
  transition:.3s;
}
.slider::before {
  content:""; position:absolute;
  top:3px; left:3px;
  height:18px; width:18px;
  background:white; border-radius:50%;
  transition:.3s;
}
input:checked + .slider {
  background:#ff7f11;
}
input:checked + .slider::before {
  transform:translateX(26px);
}

/* Log container */
#zepta-container {
  display:flex; flex-direction:column;
  height:calc(100% - 60px);
}
#zepta-log {
  flex:1; padding:1rem;
  overflow-y:auto;
}

/* Lines */
.zepta-line {
  padding:.75rem 1rem;
  margin:4px 0;
  max-width:80%;
  word-wrap:break-word;
}
.user-line { align-self:flex-end; background:rgba(255,123,0,0.15); }
.zepta-reply { align-self:flex-start; background:rgba(255,255,255,0.06); }

/* Input bar */
#zepta-bar {
  display:flex; align-items:center;
  padding:.5rem 1rem;
}
#zepta-input {
  flex:1; padding:.5rem;
  background:transparent; border:none;
  color:#fff; font-size:1rem;
}
#zepta-send {
  margin-left:.5rem; padding:.5rem 1rem;
  background:#ff7f11; border:none;
  border-radius:8px; cursor:pointer;
  transition:.2s;
}
#zepta-send:hover { background:#ffa733; }

/* Suggestions box */
.suggestion-box {
  position:absolute; top:-200px;
  left:1rem; right:1rem;
  max-height:200px; overflow-y:auto;
  display:none; flex-direction:column;
  padding:0.5rem; z-index:3;
}
.suggestion-item {
  padding:.4rem .75rem;
  border-radius:6px;
  cursor: pointer;
  transition:background .2s;
}
.suggestion-item:hover {
  background:rgba(255,255,255,0.15);
}

/* Video background */
video.hud-bg {
  position:fixed; top:0; left:0;
  width:100vw; height:100vh;
  object-fit:cover;
  z-index:-1;
  filter: brightness(0.3);
}

  </style>
</head>
<body>
  <!-- Background video element (added in JS for theme) -->
  <!-- Header / ZeptaBar -->
  <header id="zeptabar" class="glassmorph">
    <h1>üåå Zepta Terminal</h1>
    <label class="switch">
      <input type="checkbox" id="themeSwitch">
      <span class="slider"></span>
    </label>
    <span id="theme-label">Chat</span>
  </header>

  <!-- Main terminal container -->
  <div id="zepta-container">
    <div id="zepta-log"></div>
    <div id="zepta-bar" class="glassmorph">
      <input id="zepta-input" placeholder="Type /help or /connect erin..." autocomplete="off"/>
      <button id="zepta-send">‚û§</button>
      <div id="suggestions" class="suggestion-box glassmorph"></div>
    </div>
  </div>

  <!-- Audio element to play star-music -->
  <audio id="galaxySound" src="sounds/galaxy.mp3" loop></audio>

  <script >
    // ---- LOAD SOUNDS & STATE ---
const sounds = {
  click: new Audio('sounds/click.mp3'),
  typing: new Audio('sounds/typing.mp3'),
  intro: new Audio('sounds/intro.mp3'),
  levelup: new Audio('sounds/levelup.mp3'),
  babytalk: new Audio('sounds/babytalk.mp3'),
  explosion: new Audio('sounds/explosion.mp3'),
  mars_theme: new Audio('sounds/mars_theme.mp3'),
  galaxy: document.getElementById("galaxySound")
};

const defaultState = {
  resources:{money:0,oxygen:0,water:0,food:0,shelter:0,rover:0,fuel:0,energy:0,data_crystals:0},
  relationship:"stranger", companionName:"Erin", familyTree:[], xp:0,
  mood:"neutral", sfx:true, music:false
};
let state = JSON.parse(localStorage.getItem("zeptaGame")) || defaultState;
save();

function save(){ localStorage.setItem("zeptaGame", JSON.stringify(state)); }
function load(){ state = JSON.parse(localStorage.getItem("zeptaGame")) || defaultState; }

// ---- THEMES ----
const themeSwitch = document.getElementById("themeSwitch"),
      themeLabel = document.getElementById("theme-label"),
      body = document.body;

function setTheme(t){
  localStorage.setItem("theme", t);
  themeLabel.textContent = t==="terminal" ? "Terminal" : "Chat";
  themeSwitch.checked = (t==="terminal");
  applyTheme();
}

function applyTheme(){
  document.querySelector("video.hud-bg")?.remove();
  if(themeSwitch.checked === false){ // Chat mode
    const vid = document.createElement("video");
    vid.src = "starry.mp4"; vid.autoplay=vid.loop=vid.muted=true;
    vid.className = "hud-bg";
    body.prepend(vid);
  }
}
themeSwitch.addEventListener("change", ()=> setTheme(themeSwitch.checked?"terminal":"chat"));
setTheme(localStorage.getItem("theme") || "chat");

// ---- LOGGING LINES ----
const log = document.getElementById("zepta-log");
function printLine(txt,isUser=true){
  const d = document.createElement("div");
  d.textContent = (isUser ? "> " : "") + txt;
  d.className = "zepta-line " + (isUser ? "user-line" : "zepta-reply");
  log.appendChild(d);
  log.scrollTop = log.scrollHeight;
}

// ---- COMMAND LIST ----
const cmdList = {
  "/help":() => printLine("üß≠ Commands: " + Object.keys(cmdList).join(" "),false),
  "/connect erin":() => attachCompanion("Erin"),
  "/connect elena":() => attachCompanion("Elena"),
  "/companion rename":arg => updateCompanion(arg),
  "/relationship status":() => printLine(`üíû Relationship: ${state.relationship}`, false),
  "/relationship progress":() => adjustRel(+1),
  "/relationship downgrade":() => adjustRel(-1),
  "/companion gift":arg => gift(arg),
  "/companion chat":() => printLine(`${state.companionName}: Hello commander!`, false),
  "/hug":() => hug(),
  "/kiss":() => kiss(),
  "/marry":() => marry(),
  "/baby add":name => addBaby(name),
  "/family tree":()=> printLine("üå≥ " + (state.familyTree.join(", ")||"no family yet"), false),
  "/family remove":name => removeBaby(name),
  "/baby talk":() => playSound("babytalk") || printLine("üë∂ Gaga...", false),
  "/legacy status":showLegacy,
  "/xp status":() => printLine(`XP: ${state.xp}`, false),
  "/xp gain":amt => gainXP(amt),
  "/xp levelup":() => levelup(),
  "/mission build":() => missionBuild(),
  "/mission explore":() => missionExplore(),
  "/music play":() => toggleMusic(true),
  "/sound on":() => toggleSfx(true),
  "/sound off":() => toggleSfx(false),
  "/mood":() => printLine(`${state.companionName}: Feeling ${state.mood}`, false),
  "/sing":() => printLine(`${state.companionName}: üéµ La la la...`, false),
  "/dream":() => printLine("üåô You dream of the red sands of Mars...", false),
  "/journal entry":() => printLine("‚úçÔ∏è Journal entry saved.", false),
  "/secret activate":() => printLine("üõ∏ Secret mission unlocked!", false),
  "/verxio activate":() => printLine("ü§ñ Verx.io AI awake!", false),
  "/zepta overload":() => overload(),
  "/nuke":() => {playSound("explosion"); printLine("üí• Nuke triggered!", false)},
  "/aliens contact":() => printLine("üõ∏ Attempting alien contact...", false)
};

// Helper functions (attachCompanion, adjustRel, gift, etc.) below for clarity...

// --- CORE INTERACTIONS & SUGGESTIONS ---
const input = document.getElementById("zepta-input"),
      sendBtn = document.getElementById("zepta-send"),
      suggestions = document.getElementById("suggestions");

input.addEventListener("input", e => updateSuggestions(e.target.value));
input.addEventListener("keydown", e => {
  playSound("typing");
  if(e.key === "Enter"){
    processCommand(input.value.trim());
    input.value = "";
    suggestions.style.display = "none";
  }
});
sendBtn.addEventListener("click", ()=>processCommand(input.value.trim()));

// updateSuggestions()
function updateSuggestions(val){
  suggestions.innerHTML = "";
  if(val.startsWith("/")){
    for(let cmd in cmdList){
      const div = document.createElement("div");
      div.className = "suggestion-item";
      div.textContent = cmd;
      if(cmd.toLowerCase().startsWith(val.toLowerCase())){
        div.style.display="block";
      } else div.style.display="none";
      div.onclick=()=>{ input.value = cmd; suggestions.style.display="none"; playSound("click"); };
      suggestions.appendChild(div);
    }
    suggestions.style.display = "flex";
  } else suggestions.style.display = "none";
}

// processCommand()
function processCommand(v){
  if(!v) return;
  playSound("click");
  printLine(v, true);
  let matched = false;
  Object.keys(cmdList).forEach(cmd => {
    if(v.startsWith(cmd)){
      const arg = v.slice(cmd.length).trim().replace(/"/g,"");
      cmdList[cmd](arg);
      matched = true;
    }
  });
  if(!matched) printLine("‚ö†Ô∏è Unknown command, type /help", false);
}

// Utility: playSound(), attachCompanion(), adjustRel(), etc.
// ... [Add your support functions here as per earlier]

// ---- INIT STATE & UI ----
load();
printLine("üé¨ MarsoVerse Initialized", false);

  </script>
</body>
</html>
